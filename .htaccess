# <IfModule mod_rewrite.c>
#    RewriteEngine On 
 
   
#    RewriteCond %{HTTPS} !=on
#    RewriteRule ^(.*)$ https://%{HTTP_HOST}%{REQUEST_URI} [L,R=301] 
#    RewriteRule ^(.*)$ public/$1 [L]
#    Header unset ETag
#    FileETag None
# </IfModule> 



# Header set Content-Security-Policy "script-src 'unsafe-inline' 'unsafe-eval' 'self' https://code-ya.jivosite.com https://www.statcounter.com  https://www.google-analytics.com   https://static.hotjar.com  https://connect.facebook.net  https://telemetry.jivosite.com  https://cdn-cis.jivosite.com  https://telemetry.jivosite.com https://cdn-fr.jivosite.com  https://cdn.syndication.twimg.com https://platform.twitter.com https://img1.wsimg.com  https://code.jivosite.com code-eu1.jivosite.com  https://script.hotjar.com https://www.googletagmanager.com ; object-src 'self'"
# Header set Strict-Transport-Security "max-age=31536000" env=HTTPS
# Header set X-Frame-Options DENY
# Header set X-Content-Type-Options nosniff
# Header set X-XSS-Protection "1; mode=block"
# Header always set Referrer-Policy "same-origin"
# Header always set Feature-Policy "microphone 'none'; payment 'none'; sync-xhr 'self' https://aandbcarpetcleaning.com/"



# <FilesMatch "\.(js)$">
# AddHandler application/x-httpd-php .js
# </FilesMatch>
# ## EXPIRES CACHING ##
# <IfModule mod_expires.c>
# ExpiresActive On
# ExpiresByType image/jpg "access 1 year"
# ExpiresByType image/jpeg "access 1 year"
# ExpiresByType image/gif "access 1 year"
# ExpiresByType image/png "access 1 year"
# ExpiresByType text/javascript "access plus 1 month"
# ExpiresByType text/x-javascript "access plus 1 month"
# ExpiresByType application/javascript "access plus 1 month"  
# ExpiresByType application/x-javascript "access plus 1 month"
# ExpiresByType application/javascript "access 1 month"
# ExpiresByType application/x-javascript "access 1 month"
# ExpiresByType text/css "access 1 month"
# ExpiresByType text/html "access 1 month"
# ExpiresByType application/pdf "access 1 month"
# ExpiresByType text/x-javascript "access 1 month"
# ExpiresByType application/x-shockwave-flash "access 1 month"
# ExpiresByType image/x-icon "access 1 year"
# ExpiresDefault "access 1 month"
# </IfModule>
# # Or, compress certain file types by extension:
# <files *.html>
# SetOutputFilter DEFLATE
# </files>

# <IfModule mod_deflate.c>
# # Compress HTML, CSS, JavaScript, Text, XML and fonts
# AddOutputFilterByType DEFLATE application/javascript
# AddOutputFilterByType DEFLATE application/rss+xml
# AddOutputFilterByType DEFLATE application/vnd.ms-fontobject
# AddOutputFilterByType DEFLATE application/x-font
# AddOutputFilterByType DEFLATE application/x-font-opentype
# AddOutputFilterByType DEFLATE application/x-font-otf
# AddOutputFilterByType DEFLATE application/x-font-truetype
# AddOutputFilterByType DEFLATE application/x-font-ttf
# AddOutputFilterByType DEFLATE application/x-javascript
# AddOutputFilterByType DEFLATE application/xhtml+xml
# AddOutputFilterByType DEFLATE application/xml
# AddOutputFilterByType DEFLATE font/opentype
# AddOutputFilterByType DEFLATE font/otf
# AddOutputFilterByType DEFLATE font/ttf
# AddOutputFilterByType DEFLATE image/svg+xml
# AddOutputFilterByType DEFLATE image/x-icon
# AddOutputFilterByType DEFLATE text/css
# AddOutputFilterByType DEFLATE text/html
# AddOutputFilterByType DEFLATE text/javascript
# AddOutputFilterByType DEFLATE text/plain
# AddOutputFilterByType DEFLATE text/xml

 
# # Remove browser bugs (only needed for really old browsers)
# BrowserMatch ^Mozilla/4 gzip-only-text/html
# BrowserMatch ^Mozilla/4\.0[678] no-gzip
# BrowserMatch \bMSIE !no-gzip !gzip-only-text/html
# Header append Vary User-Agent
# </IfModule>


# # BEGIN Cache-Control Headers

# <ifModule mod_headers.c>

# <filesMatch ".(ico|pdf|flv|jpg|jpeg|png|gif|js|css|swf)$">
# Header set Cache-Control "max-age=84600, public"
# </filesMatch>
#   <filesMatch "\.(ico|jpe?g|png|gif|swf)$">
#     Header set Cache-Control "public"
#   </filesMatch>
#   <filesMatch "\.(css)$">
#     Header set Cache-Control "public"
#   </filesMatch>
#   <filesMatch "\.(js)$">
#     Header set Cache-Control "public"
#   </filesMatch>
#   <filesMatch "\.(x?html?|php)$">
#     Header set Cache-Control "private, must-revalidate"
#   </filesMatch>
# </ifModule>
# # END Cache-Control Headers


# <ifModule mod_gzip.c>
# mod_gzip_on Yes
# mod_gzip_dechunk Yes
# mod_gzip_item_include file .(html?|txt|css|js|php|pl)$
# mod_gzip_item_include handler ^cgi-script$
# mod_gzip_item_include mime ^text/.*
# mod_gzip_item_include mime ^application/x-javascript.*
# mod_gzip_item_exclude mime ^image/.*
# mod_gzip_item_exclude rspheader ^Content-Encoding:.*gzip.*
# </ifModule>

# Redirect Area Rug Repair
RewriteRule ^brooklyn/blog/area-rug/rug-repair-brooklyn-brooklyn$ /brooklyn/blog/area-rug/rug-repair-brooklyn [R=301,L]

<IfModule mod_rewrite.c>

# Enable the RewriteEngine
RewriteEngine On

# Redirect www to non-www with HTTPS
RewriteCond %{HTTP_HOST} ^www\.aandbcarpetcleaning\.com$ [NC]
RewriteRule ^(.*)$ https://aandbcarpetcleaning.com/$1 [R=301,L]

# Redirect HTTP to HTTPS
RewriteCond %{HTTPS} off
RewriteCond %{HTTP_HOST} ^(www\.)?aandbcarpetcleaning\.com$ [NC]
RewriteRule ^(.*)$ https://aandbcarpetcleaning.com/$1 [R=301,L]

# Redirect main domain to /brooklyn/home
RewriteCond %{HTTP_HOST} ^aandbcarpetcleaning\.com$ [NC]
RewriteCond %{REQUEST_URI} ^/$
RewriteRule ^$ https://aandbcarpetcleaning.com/brooklyn/home [R=301,L]

# Rewrite all requests to public directory
RewriteRule ^(.*)$ public/$1 [L]

   Header unset ETag
   FileETag None
</IfModule> 



Header set Content-Security-Policy "script-src 'unsafe-inline' 'unsafe-eval' 'self' https://code-ya.jivosite.com https://www.statcounter.com  https://www.google-analytics.com   https://static.hotjar.com  https://connect.facebook.net  https://telemetry.jivosite.com  https://cdn-cis.jivosite.com  https://telemetry.jivosite.com https://cdn-fr.jivosite.com  https://cdn.syndication.twimg.com https://platform.twitter.com https://img1.wsimg.com  https://code.jivosite.com code-eu1.jivosite.com  https://script.hotjar.com https://www.googletagmanager.com ; object-src 'self'"
Header set Strict-Transport-Security "max-age=31536000" env=HTTPS
Header set X-Frame-Options DENY
Header set X-Content-Type-Options nosniff
Header set X-XSS-Protection "1; mode=block"
Header always set Referrer-Policy "same-origin"
Header always set Feature-Policy "microphone 'none'; payment 'none'; sync-xhr 'self' https://aandbcarpetcleaning.com/"



<FilesMatch "\.(js)$">
AddHandler application/x-httpd-php .js
</FilesMatch>
## EXPIRES CACHING ##
<IfModule mod_expires.c>
ExpiresActive On
ExpiresByType image/jpg "access 1 year"
ExpiresByType image/jpeg "access 1 year"
ExpiresByType image/gif "access 1 year"
ExpiresByType image/png "access 1 year"
ExpiresByType text/javascript "access plus 1 month"
ExpiresByType text/x-javascript "access plus 1 month"
ExpiresByType application/javascript "access plus 1 month"  
ExpiresByType application/x-javascript "access plus 1 month"
ExpiresByType application/javascript "access 1 month"
ExpiresByType application/x-javascript "access 1 month"
ExpiresByType text/css "access 1 month"
ExpiresByType text/html "access 1 month"
ExpiresByType application/pdf "access 1 month"
ExpiresByType text/x-javascript "access 1 month"
ExpiresByType application/x-shockwave-flash "access 1 month"
ExpiresByType image/x-icon "access 1 year"
ExpiresDefault "access 1 month"
</IfModule>
# Or, compress certain file types by extension:
<files *.html>
SetOutputFilter DEFLATE
</files>

<IfModule mod_deflate.c>
# Compress HTML, CSS, JavaScript, Text, XML and fonts
AddOutputFilterByType DEFLATE application/javascript
AddOutputFilterByType DEFLATE application/rss+xml
AddOutputFilterByType DEFLATE application/vnd.ms-fontobject
AddOutputFilterByType DEFLATE application/x-font
AddOutputFilterByType DEFLATE application/x-font-opentype
AddOutputFilterByType DEFLATE application/x-font-otf
AddOutputFilterByType DEFLATE application/x-font-truetype
AddOutputFilterByType DEFLATE application/x-font-ttf
AddOutputFilterByType DEFLATE application/x-javascript
AddOutputFilterByType DEFLATE application/xhtml+xml
AddOutputFilterByType DEFLATE application/xml
AddOutputFilterByType DEFLATE font/opentype
AddOutputFilterByType DEFLATE font/otf
AddOutputFilterByType DEFLATE font/ttf
AddOutputFilterByType DEFLATE image/svg+xml
AddOutputFilterByType DEFLATE image/x-icon
AddOutputFilterByType DEFLATE text/css
AddOutputFilterByType DEFLATE text/html
AddOutputFilterByType DEFLATE text/javascript
AddOutputFilterByType DEFLATE text/plain
AddOutputFilterByType DEFLATE text/xml

 
# Remove browser bugs (only needed for really old browsers)
BrowserMatch ^Mozilla/4 gzip-only-text/html
BrowserMatch ^Mozilla/4\.0[678] no-gzip
BrowserMatch \bMSIE !no-gzip !gzip-only-text/html
Header append Vary User-Agent
</IfModule>


<filesMatch "\.(css|jpg|jpeg|png|gif|js|ico)$"> 
    Header set Cache-Control "max-age=2592000, public"
</filesMatch>


# BEGIN Cache-Control Headers

<ifModule mod_headers.c>

<filesMatch ".(ico|pdf|flv|jpg|jpeg|png|gif|js|css|swf)$">
Header set Cache-Control "max-age=84600, public"
</filesMatch>
  <filesMatch "\.(ico|jpe?g|png|gif|swf)$">
    Header set Cache-Control "public"
  </filesMatch>
  <filesMatch "\.(css)$">
    Header set Cache-Control "public"
  </filesMatch>
  <filesMatch "\.(js)$">
    Header set Cache-Control "public"
  </filesMatch>
  <filesMatch "\.(x?html?|php)$">
    Header set Cache-Control "private, must-revalidate"
  </filesMatch>
</ifModule>
# END Cache-Control Headers


<ifModule mod_gzip.c>
mod_gzip_on Yes
mod_gzip_dechunk Yes
mod_gzip_item_include file .(html?|txt|css|js|php|pl)$
mod_gzip_item_include handler ^cgi-script$
mod_gzip_item_include mime ^text/.*
mod_gzip_item_include mime ^application/x-javascript.*
mod_gzip_item_exclude mime ^image/.*
mod_gzip_item_exclude rspheader ^Content-Encoding:.*gzip.*
</ifModule>
